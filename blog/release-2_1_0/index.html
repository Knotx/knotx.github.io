<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="We have just released a minor release Knot.x 2.1.0.">
  <meta name="keywords" content="knotx, vertx, reactive, asynchronous, templating, java, polyglot, cms, release">
  <title>Knot.x 2.1.0 released! - Knot.x Blog Post</title>

  <meta property="og:title" content="Knot.x 2.1.0 released! - Knot.x Blog Post"/>
  <meta property="og:type" content="article"/>
  <meta property="og:url" content="https://knotx.io/blog/release-2_1_0/"/>
  <meta property="og:site_name" content="Knot.x Website"/>
  <meta property="og:description" content="We have just released a minor release Knot.x 2.1.0."/>
  <meta property="og:image" content="https://knotx.io/img/logo-240x240.png"/>

  <link rel="apple-touch-icon" sizes="57x57" href="/img/favicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/img/favicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/img/favicons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/img/favicons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/img/favicons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/img/favicons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/img/favicons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/favicons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/img/favicons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicons/favicon-16x16.png">
  <link rel="manifest" href="/img/favicons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/img/favicons/ms-icon-144x144.png">
  <meta name="theme-color" content="#9f136c">

  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Montserrat:200,300,400,500,700|Ubuntu:300,400,500,700" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link  rel="stylesheet" href="/styles/bootstrap.css" /><link  rel="stylesheet" href="/styles/github.css" /><link  rel="stylesheet" href="/styles/knotx.css" />
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>

  <body >
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92165781-1', 'auto');
  ga('send', 'pageview');

</script>
    <!-- Header -->
<header class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">
        <img src="/img/logo-knotx.png" class="navbar-brand-logo" alt="Knot.x Logo"/>
      </a>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        
        <li><a href="/download/">Download</a></li>
        
        <li><a href="/tutorials/">Tutorials</a></li>
        
        <li><a href="https://github.com/Knotx/knotx/issues">Issues</a></li>
        
        <li><a href="/documentation/">Documentation</a></li>
        
        <li><a href="/community/">Community</a></li>
        
        <li><a href="/blog/">Blog</a></li>
        
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</header>

    <!-- Content Header -->
<div class="content-header">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <h1>Knot.x 2.1.0 released!</h1>
      </div>
    </div>    
  </div>
  
</div>

<div class="container flex blog">
    <div class="row">
      <div class="col-sm-12">
        <article>
          <header class="meta">
  <a class="meta-item" href="https://github.com/tomaszmichalak">Tomasz Michalak</a>
  <time class="meta-item date"
        datetime="2019-12-16">December 16th, 2019
  </time>

  <div class="meta-item">
    
      <a class="meta-item" href="https://github.com/Knotx/knotx/releases/tag/2.1.0">2.1.0</a>
    
  </div>
</header>

          <section class="post">
            <h1 id="knot-x-2-1-0">Knot.x 2.1.0</h1>
<h2 id="release-notes">Release Notes</h2>
<h3 id="knotx-dependencies"><a href="https://github.com/Knotx/knotx-dependencies">knotx-dependencies</a></h3>
<ul>
<li><a href="https://github.com/Knotx/knotx-dependencies/pull/30">PR-30</a> - Upgrade to Vert.x <code>3.8.4</code>.</li>
</ul>
<h3 id="knotx-launcher"><a href="https://github.com/Knotx/knotx-launcher">knotx-launcher</a></h3>
<ul>
<li><a href="https://github.com/Knotx/knotx-launcher/pull/19">PR-19</a> - Remove deprecated API usage, Vert.x 3.8.1.</li>
</ul>
<h3 id="knotx-junit5"><a href="https://github.com/Knotx/knotx-junit5">knotx-junit5</a></h3>
<ul>
<li><a href="https://github.com/Knotx/knotx-junit5/pull/39">PR-39</a> - Fixed missing content-type header for ClasspathResourcesMockServer files</li>
</ul>
<h3 id="knotx-server-http"><a href="https://github.com/Knotx/knotx-server-http">knotx-server-http</a></h3>
<ul>
<li><a href="https://github.com/Knotx/knotx-server-http/pull/35">PR-35</a> - Vert.x upgrade to 3.8.1. Cookie Handler was deprecated: cookies are enabled by default and <code>cookieHandler</code> handler is not required anymore.</li>
</ul>
<h3 id="knotx-fragments"><a href="https://github.com/Knotx/knotx-fragments">knotx-fragments</a></h3>
<ul>
<li><a href="https://github.com/Knotx/knotx-fragments/pull/62">PR-62</a> - It introduces task &amp; graph node factories. It is connected with issue #49.</li>
<li><a href="https://github.com/Knotx/knotx-fragments/pull/51">PR-51</a> - Introduces extendable task definition allowing to define different node types and custom task providers. Marks the <code>actions</code> task configuration entry as deprecated, introduces <code>subtasks</code> instread.</li>
<li><a href="https://github.com/Knotx/knotx-fragments/pull/56">PR-56</a> - Makes composite node identifiers changeable. Renames <code>ActionNode</code> to <code>SingleNode</code>. </li>
<li><a href="https://github.com/Knotx/knotx-fragments/pull/55">PR-55</a> - Action log mechanism implementation. Renames <code>ActionFatalException</code> to <code>NodeFatalException</code>.</li>
</ul>
<h3 id="knotx-data-bridge"><a href="https://github.com/Knotx/knotx-data-bridge">knotx-data-bridge</a></h3>
<ul>
<li><a href="https://github.com/Knotx/knotx-data-bridge/pull/58">PR-58</a> - HTTP response body validation for content-type</li>
</ul>
<h3 id="knotx-template-engine"><a href="https://github.com/Knotx/knotx-template-engine">knotx-template-engine</a></h3>
<ul>
<li><a href="https://github.com/Knotx/knotx-template-engine/pull/18">PR-18</a> - <code>com.github.jknack</code> Handlebars updated to <code>4.1.2</code>.</li>
</ul>
<h3 id="knotx-stack"><a href="https://github.com/Knotx/knotx-stack">knotx-stack</a></h3>
<ul>
<li><a href="https://github.com/Knotx/knotx-stack/pull/68">PR-68</a> - Fix unit tests with custom wiremock instance.</li>
<li><a href="https://github.com/Knotx/knotx-stack/pull/62">PR-62</a> - Configure task and node factories in Fragments Handler module.</li>
<li><a href="https://github.com/Knotx/knotx-stack/pull/64">PR-64</a> - Add Unit tests for default stack configuration files.</li>
<li><a href="https://github.com/Knotx/knotx-stack/pull/59">PR-59</a> - Remove cookie handler, it is not required from Vert.x 3.8.1.</li>
</ul>
<h3 id="knotx-starter-kit"><a href="https://github.com/Knotx/knotx-starter-kit">knotx-starter-kit</a></h3>
<ul>
<li><a href="https://github.com/Knotx/knotx-starter-kit/pull/18">PR-18</a> - Apply task &amp; node factories changes.</li>
<li><a href="https://github.com/Knotx/knotx-starter-kit/pull/17">PR-17</a> - Build ZIP distribution.</li>
</ul>
<h2 id="upgrade-notes">Upgrade notes</h2>
<h3 id="task-node-factories-configuration-changes">Task &amp; node factories configuration changes</h3>
<h4 id="in-2-0">In 2.0</h4>
<pre class="highlight"><code class="hljs ruby">tasks { <span class="hljs-comment"># tasks here }</span>
actions { <span class="hljs-comment"># actions here }</span></code></pre>
<h4 id="in-2-1">In 2.1</h4>
<pre class="highlight"><code class="hljs ruby">taskFactories = [
  {
    factory = default
    config {
      tasks = tasks { <span class="hljs-comment"># tasks here }</span>
      nodeFactories = [
        {
          factory = action
          config.actions = { <span class="hljs-comment"># actions here }</span>
        }
        {
          factory = subtasks
        }
      ]
    }
  }
]</code></pre>
<h3 id="rename-actions-to-subtasks">Rename <code>actions</code> to <code>subtasks</code></h3>
<h4 id="in-2-0">In 2.0</h4>
<pre class="highlight"><code class="hljs ruby">tasks {
  books-<span class="hljs-keyword">and</span>-authors-listing {
    actions = [
      {
        ...
      },
      {
        ...
      }
    ]
    onTransitions {
      ...
    }
  }
}</code></pre>
<h4 id="in-2-1">In 2.1</h4>
<pre class="highlight"><code class="hljs ruby">tasks {
  books-<span class="hljs-keyword">and</span>-authors-listing {
    subtasks = [
      {
        ...
      },
      {
        ...
      }
    ]
    onTransitions {
      ...
    }
  }
}</code></pre>
<h3 id="http-response-body-validation-for-content-type-http-action-">HTTP response body validation for content-type (HTTP Action)</h3>
<p>If you wish to leave the previous behaviour (when non-json response is returned, exception is thrown), 
just configure responseOptions in your action config like this:</p>
<pre class="highlight"><code class="hljs ruby">     responseOptions {
        predicates = [JSON]
        forceJson = <span class="hljs-literal">false</span>
      }</code></pre>
<h3 id="remove-cookiehandler-from-server-common-handlers-list-">Remove <code>cookieHandler</code> from server common handlers list:</h3>
<h4 id="in-2-0">In 2.0</h4>
<pre class="highlight"><code class="hljs ruby">config.server {
  handlers.common {
    request = [
      {    
        name = cookieHandler    
      },    
      {    
        name = bodyHandler
      },
      <span class="hljs-regexp">//</span> ...
    ]
  }
}  </code></pre>
<h4 id="in-2-1">In 2.1</h4>
<pre class="highlight"><code class="hljs ruby">config.server {
  handlers.common {
    request = [
      {    
        name = bodyHandler
      },
      <span class="hljs-regexp">//</span>...
    ]
  }
}</code></pre>
<h3 id="build-zip-distribution-with-knot-x-starter-kit">Build ZIP distribution with Knot.x Starter Kit</h3>
<p>Remove:</p>
<pre class="highlight"><code class="hljs isbl"><span class="hljs-variable"><span class="hljs-class">tasks</span></span>.named(<span class="hljs-string">"build"</span>) {
    <span class="hljs-function"><span class="hljs-title">dependsOn</span>(<span class="hljs-string">"runTest"</span>)</span>
}</code></pre><p>and add:</p>
<pre class="highlight"><code class="hljs isbl"><span class="hljs-variable"><span class="hljs-class">tasks</span></span>.named(<span class="hljs-string">"build"</span>) {
    <span class="hljs-function"><span class="hljs-title">dependsOn</span>(<span class="hljs-string">"build-stack"</span>)</span>
}

<span class="hljs-variable"><span class="hljs-class">tasks</span></span>.register(<span class="hljs-string">"build-docker"</span>) {
    <span class="hljs-variable">group</span> = <span class="hljs-string">"docker"</span>
    <span class="hljs-function"><span class="hljs-title">dependsOn</span>(<span class="hljs-string">"runTest"</span>)</span>
}

<span class="hljs-variable"><span class="hljs-class">tasks</span></span>.register(<span class="hljs-string">"build-stack"</span>) {
    <span class="hljs-variable">group</span> = <span class="hljs-string">"stack"</span>
    <span class="hljs-comment">// https://github.com/Knotx/knotx-gradle-plugins/blob/master/src/main/kotlin/io/knotx/distribution.gradle.kts</span>
    <span class="hljs-function"><span class="hljs-title">dependsOn</span>(<span class="hljs-string">"assembleCustomDistribution"</span>)</span>
    <span class="hljs-function"><span class="hljs-title">mustRunAfter</span>(<span class="hljs-string">"build-docker"</span>)</span>
}</code></pre><p>in <code>build.gradle.kts</code> when <a href="https://github.com/Knotx/knotx-starter-kit">Knot.x Starter Kit</a> used.</p>

          </section>
        </article>
        <div id="disqus_thread"></div>
        <script>
        var disqus_config = function () {
        this.page.url = "https://knotx.io/blog/release-2_1_0/";
        this.page.identifier = "b2d78b70408f97b3f24f61616684650a";
        };
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//knotx-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    </div>
</div>
    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-sm-6">
         <p>Knot.x is <a href="https://github.com/Knotx/knotx">open source</a> and is licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache 2.0 License</a>.</p>
      </div>
      <div class="col-sm-5 col-sm-offset-1 text-right">
        <p>Knot.x is brought to you with the support of <img src="/img/Cognified_Logo_white.png" alt="Cognifide"/></p>
      </div>
    </div>
  </div>
</footer>
<script defer="defer"  src="/scripts/vendor/jquery.min.js"></script><script defer="defer"  src="/scripts/vendor/bootstrap.min.js"></script><script defer="defer"  src="/scripts/vendor/highlight.pack.js"></script><script defer="defer"  src="/scripts/knotx.js"></script><script defer="defer"  src="/scripts/vendor/jquery.qtip.min.js"></script><script defer="defer"  src="/scripts/hovermap.js"></script>

<script id="dsq-count-scr" src="//knotx-io.disqus.com/count.js" async></script>


  </body>
</html>