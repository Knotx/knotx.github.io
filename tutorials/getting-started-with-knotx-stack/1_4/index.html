<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Knot.x Website">
  <meta name="keywords" content="knotx, vertx, reactive, asynchronous, templating, java, polyglot, cms, tutorial">
  <title>Getting Started with Knot.x Stack</title>

  <meta property="og:title" content="Getting Started with Knot.x Stack"/>
  <meta property="og:type" content="article"/>
  <meta property="og:url" content="https://knotx.io/tutorials/getting-started-with-knotx-stack/1_4/"/>
  <meta property="og:site_name" content="Knot.x Website"/>
  <meta property="og:description" content="Knot.x Website"/>
  <meta property="og:image" content="https://knotx.io/img/logo-240x240.png"/>

  <link rel="apple-touch-icon" sizes="57x57" href="/img/favicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/img/favicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/img/favicons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/img/favicons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/img/favicons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/img/favicons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/img/favicons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/favicons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/img/favicons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicons/favicon-16x16.png">
  <link rel="manifest" href="/img/favicons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/img/favicons/ms-icon-144x144.png">
  <meta name="theme-color" content="#9f136c">

  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Montserrat:200,300,400,500,700|Ubuntu:300,400,500,700" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link  rel="stylesheet" href="/styles/bootstrap.css" /><link  rel="stylesheet" href="/styles/github.css" /><link  rel="stylesheet" href="/styles/knotx.css" />
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>

  <body >
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92165781-1', 'auto');
  ga('send', 'pageview');

</script>
    <!-- Header -->
<header class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">
        <img src="/img/logo-knotx.png" class="navbar-brand-logo" alt="Knot.x Logo"/>
      </a>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        
        <li><a href="/download/">Download</a></li>
        
        <li><a href="/tutorials/">Tutorials</a></li>
        
        <li><a href="https://github.com/Knotx/knotx/issues">Issues</a></li>
        
        <li><a href="/documentation/">Documentation</a></li>
        
        <li><a href="/community/">Community</a></li>
        
        <li><a href="/blog/">Blog</a></li>
        
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</header>

    <!-- Content Header -->
<div class="content-header">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <h1>Getting Started with Knot.x Stack</h1>
      </div>
    </div>    
  </div>
  
</div>

<div class="container flex blog">
    <div class="row">
      <div class="col-sm-12">
        <article>
          <header class="meta">
  <a class="meta-item" href="https://github.com/malaskowski">Maciej Laskowski</a>
  <time class="meta-item date"
        datetime="2018-10-10">October 10th, 2018
  </time>

  <div class="post-versions">    
    
      <a class="post-btn" href="/tutorials/getting-started-with-knotx-stack/1_3/">1.3.0</a>
    
      <a class="post-btn" href="/tutorials/getting-started-with-knotx-stack/1_4/">1.4.0</a>
    
      <a class="post-btn" href="/tutorials/getting-started-with-knotx-stack/1_5/">1.5.0</a>
    
      <a class="post-btn" href="/tutorials/getting-started-with-knotx-stack/2_0/">2.0.0</a>
    
  </div>
</header>

          <section class="post">
            <h2 id="overview">Overview</h2>
<p>We start this tutorial with the great news! Finally <a href="https://github.com/Knotx/knotx-stack">Knot.x Stack</a> is available.</p>
<p>Let&#39;s just cut to the point. In this tutorial we will configure Knot.x instance with a simple page that
uses an external datasource (Google API Books) to fetch the dynamic data and display it on our page.</p>
<p>What you’re going to learn:</p>
<ul>
<li>How to setup Knot.x instance using <a href="https://github.com/Knotx/knotx-stack">Knot.x Stack</a></li>
<li>How to transform a static HTML into the dynamic content and configure Knot.x to use REST services to get data</li>
<li>How to use the data from such services to dynamically populate HTML</li>
</ul>
<h2 id="setup-basic-knot-x-instance">Setup basic Knot.x instance</h2>
<p><strong>Prerequisites</strong>
You will need following things to use Knot.x stack:</p>
<ul>
<li>JDK 8</li>
<li>Linux or OSX bash console (for Windows users we recommend using e.g. Ubuntu with <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">Windows Subsystem for Linux</a>).</li>
</ul>
<p>Download <a href="https://knotx.io/download">Knot.x distribution</a> and unzip it.</p>
<p>For the purpose of this tutorial let&#39;s call the structure of unzipped stack <code>KNOTX_HOME</code>.
<code>KNOTX_HOME</code> which is Knot.x instance with all configuration files and dependencies has following structure:</p>
<pre class="highlight"><code class="hljs smali">├── bin
│   └── knotx                     // shell script used to resolve<span class="hljs-built_in"> and </span>run knotx<span class="hljs-built_in"> instance
</span>├── conf                          // contains application<span class="hljs-built_in"> and </span>logger configuration files
│   ├── application.conf          // defines all modules that Knot.x<span class="hljs-built_in"> instance </span>is running, provides configuration for Knot.x Core<span class="hljs-built_in"> and </span>global variables for other config files
│   ├── bootstrap.json            // config retriever options, defines application configuration stores (e.g. points to `application.conf` - the main configuration)
│   ├── default-cluster.xml       // basic configuration of Knot.x<span class="hljs-built_in"> instance </span>cluster
│   ├── includes                  // additional modules configuration which are included in `application.conf`
│   │   ├── actionKnot.conf
│   │   ├── dataBridge.conf
│   │   ├── dataSourceHttp.conf
│   │   ├── hbsKnot.conf
│   │   ├── httpRepo.conf
│   │   ├── server.conf
│   └── logback.xml          // logger configuration
├── knotx-stack.json         // stack descriptor, defines<span class="hljs-built_in"> instance </span>libraries<span class="hljs-built_in"> and </span>dependencies
├── lib                      // contains<span class="hljs-built_in"> instance </span>libraries<span class="hljs-built_in"> and </span>dependencies,<span class="hljs-built_in"> instance </span>classpath
│   ├── list of project dependency libraries
│   ├── ...</code></pre><p>Now, run</p>
<pre class="highlight"><code class="hljs cmd">bin/knotx run-knotx</code></pre>
<p>to start the Knot.x instance. You should see that the instance is running with all deployed modules. Following entries should appear in the <code>logs/knotx.log</code> file:</p>
<pre class="highlight"><code class="hljs angelscript"><span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-17</span> <span class="hljs-number">09</span>:<span class="hljs-number">48</span>:<span class="hljs-number">39.849</span> [vert.x-eventloop-thread<span class="hljs-number">-0</span>] INFO  i.k.launcher.KnotxStarterVerticle - Knot.x STARTED
      Deployed httpRepo=java:io.knotx.repository.http.HttpRepositoryConnectorVerticle [<span class="hljs-number">233</span>dced4<span class="hljs-number">-658</span>a<span class="hljs-number">-422</span>b<span class="hljs-number">-870f</span><span class="hljs-number">-51f</span>12a7ced21]
      Deployed assembler=java:io.knotx.assembler.FragmentAssemblerVerticle [<span class="hljs-number">9</span>a075059<span class="hljs-number">-4</span>b73<span class="hljs-number">-4f</span>50<span class="hljs-number">-9890</span>-d38282e2ace4]
      Deployed dataBridge=java:io.knotx.databridge.core.DataBridgeKnot [<span class="hljs-number">0</span>c5ac5ea-a196<span class="hljs-number">-4678</span><span class="hljs-number">-8f</span>11-e6af84f23e7c]
      Deployed dataSourceHttp=java:io.knotx.databridge.http.HttpDataSourceAdapter [ba9429fb-ef52<span class="hljs-number">-4241</span><span class="hljs-number">-8</span>c11<span class="hljs-number">-94977</span>b0a30c9]
      Deployed splitter=java:io.knotx.splitter.FragmentSplitterVerticle [da1384fb<span class="hljs-number">-641</span>a<span class="hljs-number">-4835</span>-a313<span class="hljs-number">-03</span>ecc1c42458]
      Deployed hbsKnot=java:io.knotx.knot.templating.HandlebarsKnotVerticle [<span class="hljs-number">41875</span>d6a<span class="hljs-number">-699</span>a<span class="hljs-number">-4099</span><span class="hljs-number">-969f</span><span class="hljs-number">-115292152801</span>]
      Deployed server=java:io.knotx.server.KnotxServerVerticle [<span class="hljs-number">1</span>d044822<span class="hljs-number">-8</span>c95<span class="hljs-number">-4</span>ae4-b2f8<span class="hljs-number">-6886412400</span>eb]</code></pre><p>Congratulation! That&#39;s it. You have your own basic Knot.x instance running.</p>
<h2 id="hello-service-configuration">Hello Service configuration</h2>
<p>Lets now configure Knot.x to do the magic for us.
We need to do following things:</p>
<ul>
<li>provide the page template, for the tutorial purpose we will use <code>fileSystemRepo</code>,</li>
<li>provide the datasource, we will use the Google Books API.</li>
</ul>
<blockquote>
<p>All configuration options and default values, such as address fields, for each Knot.x module are
described directly in the configuration files of those modules in <code>conf</code>.</p>
</blockquote>
<h3 id="templates-repository-configuration">Templates repository configuration</h3>
<p>By default <code>fileSystemRepo</code> is not enabled in Knot.x Stack, because its purposes are purely academical.
It is not designed to be used as a production ready solution (you should use <code>httpRepo</code> there).</p>
<p>Edit the <code>conf/application.conf</code> file and</p>
<ul>
<li><p>add the following entry to <code>modules</code></p>
<pre class="highlight"><code class="hljs ruby"><span class="hljs-string">"fileSystemRepo=io.knotx.repository.fs.FilesystemRepositoryConnectorVerticle"</span></code></pre>
<p>By doing that you let Knot.x instance to start <code>FilesystemRepositoryConnector</code> with the name <code>fileSystemRepo</code>. 
It will be later referenced by this name in configurations.</p>
</li>
<li><p>uncomment <code>fileSystemRepo.address</code> in the <code>global.repositories</code> section to define the Event Bus address of Filesystem Repository.</p>
<pre class="highlight"><code class="hljs ruby">fileSystemRepo.address = knotx.core.repository.filesystem</code></pre>
</li>
</ul>
<ul>
<li>Save the changes in <code>conf/application.conf</code>.
You may see that Knot.x instance reloaded modules and <code>fileSystemRepo</code> is now one of available modules. <strong>No restart required!</strong></li>
</ul>
<pre class="highlight"><code class="hljs maxima">      Deployed httpRepo=java:io.knotx.repository.http.HttpRepositoryConnectorVerticle [c81f07ae-<span class="hljs-number">9345</span>-482a-bd7f-af3e261876e0]
      Deployed assembler=java:io.knotx.assembler.FragmentAssemblerVerticle [d8010ea9-<span class="hljs-number">6b65</span>-482b-a37c-2139bf154413]
      Deployed dataBridge=java:io.knotx.databridge.core.DataBridgeKnot [db7b7503-<span class="hljs-number">71e0</span>-<span class="hljs-number">40e0</span>-adde-9012c885d581]
      Deployed splitter=java:io.knotx.splitter.FragmentSplitterVerticle [ed249e56-92c3-486d-827a-ad506a7e0ac3]
      Deployed hbsKnot=java:io.knotx.knot.templating.HandlebarsKnotVerticle [b19ea9d2-59ed-<span class="hljs-number">4926</span>-<span class="hljs-number">9365</span>-3579af42895b]
      Deployed fileSystemRepo=java:io.knotx.repository.fs.FilesystemRepositoryConnectorVerticle [<span class="hljs-number">0879f874</span>-<span class="hljs-number">1276</span>-<span class="hljs-number">44b9</span>-b746-585ab19f7d25]
      Deployed dataSourceHttp=java:io.knotx.databridge.http.HttpDataSourceAdapter [9caebb6a-18ed-474f-<span class="hljs-number">9182</span>-56efdd180771]
      Deployed server=java:io.knotx.server.KnotxServerVerticle [<span class="hljs-number">0c5f5136</span>-c925-4f93-<span class="hljs-number">88b3</span>-d24233a54988]</code></pre><p>Now, let&#39;s configure <code>fileSystemRepo</code> to read files from the local filesystem.</p>
<p>Create <code>content</code> directory in <code>KNOTX_HOME</code> and put there following page template with Knot.x snippet (<code>&lt;script data-knotx-knots=&quot;databridge,handlebars&quot;&gt;...</code>):</p>
<p><em>books.html</em></p>
<pre class="highlight"><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Knot.x<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://bootswatch.com/4/superhero/bootstrap.min.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container-fluid"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-sm-12"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel panel-default"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel-heading"</span>&gt;</span>Books list<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel-body"</span>&gt;</span>
          This page lists Java related books provided by <span class="hljs-tag">&lt;<span class="hljs-name">a</span>
            <span class="hljs-attr">href</span>=<span class="hljs-string">"https://www.googleapis.com/books/v1/volumes?q=java"</span>&gt;</span>Googleapis book service<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>.
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">data-knotx-knots</span>=<span class="hljs-string">"databridge,handlebars"</span>
            <span class="hljs-attr">data-knotx-databridge-name</span>=<span class="hljs-string">"bookslist"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"text/knotx-snippet"</span>&gt;</span><span class="handlebars"><span class="xml">
      </span><span class="hljs-template-tag">{{#<span class="hljs-name"><span class="hljs-builtin-name">each</span></span> _result.items}}</span><span class="xml">
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-sm-3"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-img-top"</span>
             <span class="hljs-attr">src</span>=<span class="hljs-string">"</span></span></span><span class="hljs-template-variable">{{volumeInfo.imageLinks.thumbnail}}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>
             <span class="hljs-attr">alt</span>=<span class="hljs-string">"</span></span></span><span class="hljs-template-variable">{{volumeInfo.title}}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-block"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span></span><span class="hljs-template-variable">{{volumeInfo.title}}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-text"</span>&gt;</span>
              </span><span class="hljs-template-tag">{{#<span class="hljs-name"><span class="hljs-builtin-name">each</span></span> volumeInfo.authors as |author|}}</span><span class="xml">
                </span><span class="hljs-template-variable">{{author}}</span><span class="hljs-template-tag">{{#<span class="hljs-name"><span class="hljs-builtin-name">unless</span></span> @last}}</span><span class="xml">, </span><span class="hljs-template-tag">{{/<span class="hljs-name"><span class="hljs-builtin-name">unless</span></span>}}</span><span class="xml">
              </span><span class="hljs-template-tag">{{/<span class="hljs-name"><span class="hljs-builtin-name">each</span></span>}}</span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
              Published: </span><span class="hljs-template-variable">{{volumeInfo.publishedDate}}</span><span class="xml">
            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      </span><span class="hljs-template-tag">{{/<span class="hljs-name"><span class="hljs-builtin-name">each</span></span>}}</span><span class="xml">
    </span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>
<p>Create <code>conf/includes/fileSystemRepo.conf</code> file with the following:</p>
<pre class="highlight"><code class="hljs ruby"><span class="hljs-comment"># Event bus address on which the File System Repository connector listens on. Default is 'knotx.core.repository.filesystem'</span>
<span class="hljs-comment"># Here below, we use a global constant defined in `conf/application.conf`</span>
address = ${global.repositories.fileSystemRepo}
<span class="hljs-comment"># Path to the directory on the local filesystem which will be the root for requested templates</span>
catalogue = <span class="hljs-string">"./content/"</span></code></pre>
<p>This way we define the <code>content</code> directory that will to be our file repository.</p>
<p>Next we need to reference it at the end of <code>conf/application.conf</code> file by adding the following:</p>
<pre class="highlight"><code class="hljs ruby">config.fileSystemRepo {
  options.config {
    <span class="hljs-keyword">include</span> required(<span class="hljs-string">"includes/fileSystemRepo.conf"</span>)
  }
}</code></pre>
<p>Replace <code>httpRepo</code> with  <code>fileSystemRepo</code> in <code>conf/server.conf</code> in  <code>defaultFlow</code> section.</p>
<pre class="highlight"><code class="hljs ruby">...
<span class="hljs-comment"># Configuration of a default flow - aka Templating mode</span>
defaultFlow {
  <span class="hljs-comment"># List of the Knot.x templates repositories supported by the Server</span>
  repositories = [
    {
      path = <span class="hljs-string">".*"</span>
      address = ${global.repositories.fileSystemRepo}
    }
  ]
...</code></pre>
<h3 id="connecting-the-datasource">Connecting the datasource</h3>
<p>As you probably noticed in the template snippet, <code>bookslist</code> datasource is defined (<code>data-knotx-databridge-name=&quot;bookslist&quot;</code>).
Let&#39;s now define it in the configuration.</p>
<p>To do so, open <code>conf/includes/dataBridge.conf</code> and add the <code>bookslist</code> data definition:</p>
<pre class="highlight"><code class="hljs ruby"><span class="hljs-comment"># Event bus settings</span>
address = ${global.bridge.address}
<span class="hljs-comment"># List of mappings between data definition aliases and datasources.</span>
<span class="hljs-comment"># You can define here as many data definitions definitions as required for your project.</span>
dataDefinitions = [
  <span class="hljs-comment"># Definition of the single datasource to be used in the HTML snippets.</span>
  <span class="hljs-comment"># You can define an array of such data definitions here.</span>
  {
    <span class="hljs-comment"># Name of the data definition that will be used in HTML snippets</span>
    name = bookslist
    <span class="hljs-comment"># Arbitrary parameters to be send to datasources adapter. In this case we send the query that is part of request path to google books API</span>
    params {
      path= <span class="hljs-string">"/books/v1/volumes?q=java"</span>
    }
    <span class="hljs-comment"># Event bus address of the datasources adapter that is responsible for handling physicall communication with a data source</span>
    adapter = ${global.bridge.dataSource.http.address}
  }
]</code></pre>
<p>Now, as we have the <code>bookslist</code> data definition, let&#39;s edit <code>conf/includes/dataSourceHttp.conf</code> file and configure Adapter available
under <code>${global.bridge.dataSource.http.address}</code> which evaluates into <code>knotx.bridge.datasource.http</code> address.</p>
<p>Set up service entry and enable SSL by setting ssl = true in the clientOptions configuration.</p>
<pre class="highlight"><code class="hljs ruby"><span class="hljs-comment"># Event bus address of the Basic HTTP Datasource</span>
address = ${global.bridge.dataSource.http.address}

clientOptions {
  maxPoolSize = <span class="hljs-number">1000</span>
  idleTimeout = <span class="hljs-number">120</span> <span class="hljs-comment"># seconds</span>
  <span class="hljs-comment"># If your datasources are using SSL you'd need to configure here low level details on how the</span>
  <span class="hljs-comment"># SSL connection is to be maintaned. Currently, if configured all defined in 'datasources' section</span>
  <span class="hljs-comment"># will use SSL</span>
  ssl = <span class="hljs-literal">true</span>
}

<span class="hljs-comment"># List of datasource services that are supported by this datasource adapter.</span>
<span class="hljs-comment"># You can define here as many service definitions as required for your project.</span>
services = [
  {
    <span class="hljs-comment"># A regexp.</span>
    <span class="hljs-comment"># Any request to the service made by the adapter, is being made to the service with a given</span>
    <span class="hljs-comment"># physical conenction details, only if the given path matching this path regexp</span>
    path = <span class="hljs-string">"/books.*"</span>
    <span class="hljs-comment"># A domain or IP of actual HTTP service the adapter will talk to</span>
    domain =  <span class="hljs-string">"www.googleapis.com"</span>
    <span class="hljs-comment"># HTTP port of the service, since this is SSL connection, port wourld be 443</span>
    port = <span class="hljs-number">443</span>
    <span class="hljs-comment"># List of request headers that will be send to the given service endpoint.</span>
    <span class="hljs-comment"># Each header can be use wildcards '*' to generalize list, we pass all headers here.</span>
    <span class="hljs-comment"># For the purpose of this tutorial, we deny all request headers.</span>
    allowedRequestHeaders = [ ]
    <span class="hljs-comment"># Additional request query parameters to be send in each request. We don't need here any.</span>
    queryParams {}
    <span class="hljs-comment"># Additional headers to be send in each request to the service. We don't need here any.</span>
    additionalHeaders {}
  }
]

<span class="hljs-comment"># Statically defined HTTP request header sent in every request to any datasource</span>
customRequestHeader {
  name = X-User-Agent
  value = Knot.x
}</code></pre>
<p>Save the configuration file, Knot.x will reload its modules once again.</p>
<p>The last thing left, open <a href="http://localhost:8092/books.html">http://localhost:8092/books.html</a> - Voilà!</p>

          </section>
        </article>
        <div id="disqus_thread"></div>
        <script>
        var disqus_config = function () {
        this.page.url = "https://knotx.io/tutorials/getting-started-with-knotx-stack/1_4/";
        this.page.identifier = "87ae1a1b2b01e9d30cddee5fce6362bd";
        };
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//knotx-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    </div>
</div>
    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-sm-6">
         <p>Knot.x is <a href="https://github.com/Knotx/knotx">open source</a> and is licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache 2.0 License</a>.</p>
      </div>
      <div class="col-sm-5 col-sm-offset-1 text-right">
        <p>Knot.x is brought to you with the support of
        <a href="https://www.wundermanthompson.com/">
          <svg viewBox="-51 -14.008 115 39.953" xmlns="http://www.w3.org/2000/svg">
            <path class="mark" fill="#e661b2" d="M-40.465-10.079h-3.929v-3.929h-2.672v3.929H-51v2.672h3.934v3.929h2.672v-3.929h3.929z"></path>
            <path class="text" fill="#0a47ed" d="M21.3 8.519zM27.594.165a3.643 3.643 0 00-3.638-3.638h-3.995V8.523H21.3V3.802h2.656c.103 0 .205-.005.308-.015l2.166 4.736h1.472L25.561 3.43A3.667 3.667 0 0027.594.165zm-3.638 2.304H21.3v-4.614h2.656a2.314 2.314 0 012.31 2.31 2.312 2.312 0 01-2.31 2.304zm-43.713 2.386c0 1.783-1.206 2.498-2.662 2.498-1.461 0-2.662-.715-2.662-2.498v-8.333h-1.333v8.344c0 2.355 1.629 3.816 3.995 3.816 2.371 0 3.996-1.461 3.996-3.816v-8.344h-1.333v8.333zm-12.518.915l-1.773-9.242h-1.62L-37.44 5.77l-1.666-9.242h-1.359l2.304 11.996h1.411l1.89-9.288 1.891 9.288h1.41l2.304-11.996h-1.359l-1.661 9.242zm45.564 8.016H9.304v11.996h1.334v-4.711h2.651a3.64 3.64 0 003.638-3.637 3.628 3.628 0 00-3.638-3.648zm0 5.947h-2.651v-4.608h2.651a2.308 2.308 0 012.31 2.31 2.306 2.306 0 01-2.31 2.298zm-2.651 6.049zM47.09-3.478L43.269 8.519h1.39l.89-2.764h4.547l.879 2.764h1.41L48.541-3.478H47.09zm-1.123 7.904l1.859-5.778 1.839 5.778h-3.698zm-10.362 9.197a3.889 3.889 0 00-3.883 3.893v4.537a3.889 3.889 0 003.883 3.893 3.899 3.899 0 003.894-3.893v-4.537a3.898 3.898 0 00-3.894-3.893zm2.555 8.43a2.55 2.55 0 01-2.555 2.555 2.55 2.55 0 01-2.555-2.555v-4.537c0-1.42 1.145-2.564 2.555-2.564s2.555 1.145 2.555 2.564v4.537zm-48.767-8.43a3.896 3.896 0 00-3.888 3.893v4.537a3.898 3.898 0 003.888 3.893 3.898 3.898 0 003.893-3.893v-4.537a3.898 3.898 0 00-3.893-3.893zm2.56 8.43c0 1.41-1.145 2.555-2.56 2.555s-2.56-1.135-2.56-2.555v-4.537a2.559 2.559 0 012.56-2.564c1.41 0 2.56 1.145 2.56 2.564v4.537zM-7.93 5.77l-5.431-9.242h-1.257V8.523h1.333V-.725l5.431 9.243h1.257V-3.478H-7.93V5.77zm70.552-9.243V5.77l-5.416-9.242h-1.267V8.523h1.328V-.725l5.437 9.243h1.268V-3.478l-1.35.005zM50.504 23.033l-5.437-9.247H43.81v11.996h1.339v-9.247l5.426 9.247h1.257V13.786h-1.328v9.247zM5.104 4.63V.416a3.89 3.89 0 00-3.888-3.888h-3.99V8.523h3.99A3.9 3.9 0 005.104 4.63zm-6.545-6.775H1.21A2.559 2.559 0 013.77.415V4.63c0 1.41-1.139 2.56-2.56 2.56h-2.651v-9.335zM16.446 7.19h-6.014V3.174h5.359V1.841h-5.359v-3.985h6.014v-1.333H9.1V8.519h7.347V7.19zm19.159-4.741l-2.984-5.921h-1.39V8.523h1.329V-.725l2.615 5.278h.858l2.616-5.278v9.243h1.349V-3.478h-1.39l-3.003 5.927zm-75.416 12.676h4.287v10.657h1.333V15.125h4.281v-1.339h-9.901v1.339zm20.007 3.994h-5.232v-5.333h-1.333v11.996h1.333v-5.334h5.227v5.334h1.339V13.786h-1.339v5.333h.005zm44.618.011l-1.91-.756c-1.288-.542-1.462-1.145-1.462-1.676 0-.49.185-.899.542-1.196.429-.356 1.094-.562 1.85-.562.776 0 1.431.215 1.86.582.397.348.602.839.602 1.462v.215h1.339v-.215c0-2.084-1.553-3.372-3.801-3.372-2.238 0-3.729 1.268-3.729 3.075 0 1.604 1.134 2.483 2.523 3.015l1.696.674c1.645.635 2.126 1.104 2.126 2.086 0 .643-.226 1.154-.655 1.522-.459.397-1.185.623-2.002.623-.858 0-1.584-.205-2.054-.593-.419-.348-.634-.838-.634-1.44v-.297h-1.339v.297c0 2.074 1.646 3.371 4.026 3.371 2.37 0 3.985-1.369 3.985-3.483.001-2.045-1.573-2.78-2.963-3.332zm-23.65.572l-2.994-5.916h-1.385v11.996h1.333v-9.247l2.621 5.282h.854l2.621-5.282v9.247h1.333V13.786H4.164l-3 5.916z"></path>
          </svg>
         </a>
        </p>
      </div>
    </div>
  </div>
</footer>
<script defer="defer"  src="/scripts/vendor/jquery.min.js"></script><script defer="defer"  src="/scripts/vendor/bootstrap.min.js"></script><script defer="defer"  src="/scripts/vendor/highlight.pack.js"></script><script defer="defer"  src="/scripts/knotx.js"></script><script defer="defer"  src="/scripts/vendor/jquery.qtip.min.js"></script><script defer="defer"  src="/scripts/hovermap.js"></script>


  </body>
</html>